#   Online Bookstore Sales Analysis (SQL)

![SQL](https://img.shields.io/badge/Language-SQL-orange) ![Database](https://img.shields.io/badge/Database-PostgreSQL-blue) ![Tool](https://img.shields.io/badge/Tool-pgAdmin4-green)

##  Project Overview
This project is an end-to-end data analysis of an **Online Bookstore** database. The goal is to analyze sales performance, customer behavior, and inventory trends using advanced **SQL (PostgreSQL)** techniques. 

The project solves real-world business questions like identifying top-selling genres, calculating customer lifetime value (CLV), and tracking month-over-month revenue growth.

##  Database Schema
The database consists of three relational tables:
1.  **Books:** Contains book details (Title, Author, Genre, Price, Stock).
2.  **Customers:** Contains customer demographics (Name, Email, City, Country).
3.  **Orders:** Transactional data linking Customers and Books (Order Date, Quantity, Total Amount).

> **Note:** An Entity Relationship Diagram (ERD) is included in the repository to visualize table relationships.
  ![Online Bookstore ER Diagram](ERD_Diagram.png)
---

##  Key Problems Solved
I categorized the analysis into three levels of complexity:

### ðŸŸ¢ Level 1: Basic Analysis
* Identified high-value books (Price > $20).
* Tracked low-stock inventory to prevent stockouts.
* Analyzed book distribution by Genre.

### ðŸŸ¡ Level 2: Intermediate Analysis (Joins & Aggregations)
* Calculated **Total Revenue** generated by each Genre.
* Identified **Inactive Customers** (0 orders) for marketing campaigns.
* Analyzed the **Most Popular Authors** based on sales volume.

### ðŸ”´ Level 3: Advanced Analysis (Window Functions & CTEs)
* **Customer Segmentation:** Categorized users into 'VIP', 'Regular', and 'New' based on spending logic using `CASE` statements.
* **Ranking:** Identified the **Top-Spending Customer in Each City** using `RANK()` and `PARTITION BY`.
* **Trend Analysis:** Calculated **Month-over-Month (MoM) Revenue Growth** using `LAG()` window function.

---

##  Key Insights & Findings
* **Genre Performance:** 'Fiction' and 'Science Fiction' are the highest revenue-generating genres.
* **Customer Behavior:** A small percentage of 'VIP' customers contribute to a significant portion of total revenue.
* **Geographical Trends:** Specific cities show higher average transaction values, indicating potential markets for targeted ads.
* **Sales Trends:** Revenue shows a positive growth trend in the last quarter (based on MoM analysis).

---

##  Technical Skills Demonstrated
* **Data Definition Language (DDL):** Creating tables with Primary & Foreign Keys.
* **Joins:** Inner Join, Left Join to merge multiple tables.
* **Window Functions:** `RANK()`, `DENSE_RANK()`, `LAG()`, `OVER()`, `PARTITION BY`.
* **CTEs (Common Table Expressions):** Used for complex calculations like MoM growth.
* **Aggregation & Grouping:** `SUM()`, `COUNT()`, `GROUP BY`, `DATE_TRUNC()`.
* **Data Cleaning:** Handling NULL values using logic.

---

##  Code Highlight (Advanced Query)
**Objective:** Calculate the Percentage Growth in Revenue from the previous month.

```sql
WITH Monthly_Revenue AS (
    SELECT 
        DATE_TRUNC('month', order_date) AS Months,
        SUM(total_amount) AS Revenue
    FROM orders
    GROUP BY 1
),
Comparison AS (
    SELECT 
        Months,
        Revenue,
        LAG(Revenue) OVER (ORDER BY Months) AS Previous_Month_Revenue
    FROM Monthly_Revenue
)
SELECT 
    Months,
    Revenue,
    ROUND(((Revenue - Previous_Month_Revenue) / NULLIF(Previous_Month_Revenue, 0)) * 100, 2) AS Growth_Percentage
FROM Comparison;
